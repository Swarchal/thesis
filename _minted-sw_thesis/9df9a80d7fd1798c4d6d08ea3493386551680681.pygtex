\begin{Verbatim}[commandchars=\\\{\},codes={\catcode`\$=3\catcode`\^=7\catcode`\_=8}]
threshold = 0.8
pca\PYGZus{}output = prcomp(data)
pc\PYGZus{}variance = pca\PYGZus{}output\PYGZdl{}sdev\PYGZca{}2
cumulative\PYGZus{}proportion\PYGZus{}variance = cumsum(pc\PYGZus{}variance) / sum(pc\PYGZus{}variance)
n\PYGZus{}components = min(which(cumulative\PYGZus{}proportion\PYGZus{}variance \PYGZgt{}= threshold))
\end{Verbatim}
